<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>
        VOLANTIS SSMS - {{ data.voucherType.name ?? 'BOL' }} #{{ data.id }}
    </title>

    <style>
        @page {
            margin: 1cm 1cm 2cm 1cm;
            @bottom-center {
                content: "Pág " counter(page) " / " counter(pages);
                font-size: 0.75rem;
                color: #555;
                font-family: sans-serif;
                font-weight: bold;
            }
        }


        body {
            margin: 0;
            padding: 0;
            font-family: sans-serif;
            font-size: 0.85rem;
            line-height: 1.4;
            color: #111;
        }

        h1 {
            margin: 0.2rem 0;
            font-size: 0.90rem;
            font-weight: 700;
            line-height: 1.2;
        }

        .container {
            width: 98%;
            max-width: 1024px;
            margin-left: auto;
            margin-right: auto;
            padding: 0.25rem;
        }

        .grid-cols-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.25rem;
        }

        .col-span-3 {
            grid-column: 1 / -1;
        }

        .border {
            border: 1px solid #e5e7eb;
        }

        .font-bold {
            font-weight: 700;
        }

        .inline-block {
            display: inline-block;
        }

        .text-center {
            text-align: center;
        }

        .text-end {
            text-align: right;
        }

        .m-1 {
            margin: 0.25rem;
        }

        .mt-3 {
            margin-top: 0.75rem;
        }

        .mb-3 {
            margin-bottom: 0.75rem;
        }

        .ms-1 {
            margin-left: 0.25rem;
        }

        .ms-3 {
            margin-left: 0.75rem;
        }

        .me-3 {
            margin-right: 0.75rem;
        }

        .w-32 {
            width: 8rem;
        }


        table {
            width: 98%;
            border-collapse: collapse;
            margin-top: 0.5rem;
            margin-bottom: 0.5rem;
            page-break-inside: avoid;
            table-layout: fixed;
            margin-bottom: 25px;
        }

        table thead {
            background-color: #f3f4f6;
        }

        table th,
        table td {
            border: 1px solid #e5e7eb;
            padding: 0.4rem 0.5rem;
            font-size: 0.85rem;
        }

        tr {
            page-break-inside: avoid;
        }

        .page-break {
            page-break-after: always;
        }

        .text-left {
            text-align: left;
        }

        .text-right {
            text-align: right;
        }

        .text-center {
            text-align: center;
        }
    </style>
</head>

<body>

    @each((detailsChunk, pageIndex) in chunks)
    <div class="container">

        <div class="grid-cols-3">

            <div>
                <img src="{{ logo }}" style="width: 100%;" />
            </div>


            <div class="ms-1 mt-3 mb-3">
                <h1 class="font-bold">{{data?.store?.name ?? 'VOLANTIS SSMS'}}</h1>
                <h1> {{ address }}</h1>
            </div>


            <div class="border ms-3 me-3 text-center" style="padding: 0.5rem;">
                <h1 class="font-bold">
                    {{ data.voucherType?.name == 'BOLETA' || data.voucherType?.name == 'boleta'
                    ? 'BOLETA DE VENTA ELECTRÓNICA'
                    : data.voucherType?.name }}
                </h1>
                <h1 class="font-bold">RUC: {{ ruc }}</h1>
                <h1 class="font-bold">{{ data.set }}-{{data.correlative}}</h1>
            </div>
            <div class="border m-1 col-span-3" style="padding: 0.5rem;">
                <h1>
                    <span class="inline-block w-32">Señor(es):</span>
                    {{data.customer.names}} {{data.customer.surnames}}
                </h1>
                <h1>
                    <span class="inline-block w-32">DNI:</span>
                    {{data.customer.dni}}
                </h1>
                <h1>
                    <span class="inline-block w-32">Tipo de Moneda:</span>
                    SOLES
                </h1>
                <h1>
                    <span class="inline-block w-32">Método de Pago:</span>
                    {{data.paymentType?.name ?? 'EFECTIVO'}}
                </h1>
                                <h1>
                    <span class="inline-block w-32">Vendedor:</span>
                    {{data.user?.names ?? '-----'}}  {{data.user?.surnames ?? ''}}
                </h1>
                              </h1>
                                <h1>
                    <span class="inline-block w-32">Fecha:</span>
                    {{formatAsDateTime(data.createdAt)}}
                </h1>
            </div>
        </div>

        <table>
            <thead>
                <tr>
                    <th>
                        Cantidad
                    </th>
                    <th>
                        Presentación
                    </th>
                    <th>
                        Descripción
                    </th>
                    <th>
                        Precio
                    </th>
                    <th>
                        Subtotal
                    </th>
                </tr>
            </thead>

            <tbody>
                @each(vd in detailsChunk)
                <tr>
                    <td class="text-center">
                        {{ vd.quantity }}
                    </td>

                    <td>
                        {{ vd.product?.presentation?.name ?? 'null' }}
                    </td>

                    <td>
                        {{ vd.product?.name ?? 'ayuda' }}
                    </td>

                    <td class="text-end">
                        {{ vd.unitPrice }}
                    </td>
                    <td class="text-end">
                        {{ sunatRound(vd.quantity * vd.unitPrice) }}
                    </td>
                </tr>
                @endeach


            </tbody>
        </table>
    </div>

    @if(pageIndex < totalPages - 1) 
    <div class="page-break">
        </div>
        @endif
        @endeach

        <table>
            <tbody>
                <tr>
                    <td colspan="3"></td>
                    <td class="font-bold">TOTAL</td>
                    <td class="text-end font-bold">{{ data.total }}</td>
                </tr>
            </tbody>
        </table>

</body>

</html>